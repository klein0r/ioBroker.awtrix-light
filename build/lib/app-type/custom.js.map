{
  "version": 3,
  "sources": ["../../../src/lib/app-type/custom.ts"],
  "sourcesContent": ["import { AwtrixLight } from '../../main';\nimport { CustomApp } from '../adapter-config';\nimport { AwtrixApi } from '../api';\nimport { AppType as AbstractAppType } from './abstract';\n\nexport namespace AppType {\n    type ObjCache = {\n        val: string | ioBroker.StateValue | undefined;\n        unit: any;\n        type: string;\n        ts: number;\n    };\n\n    export class Custom extends AbstractAppType.AbstractApp {\n        private appDefinition: CustomApp;\n        private objCache: ObjCache | undefined;\n        private isStaticText: boolean;\n        private isBackgroundOny: boolean;\n        private cooldownTimeout: void | NodeJS.Timeout | null;\n\n        public constructor(apiClient: AwtrixApi.Client, adapter: AwtrixLight, definition: CustomApp) {\n            super(apiClient, adapter, definition);\n\n            this.appDefinition = definition;\n            this.objCache = undefined;\n            this.isStaticText = false;\n            this.isBackgroundOny = true;\n            this.cooldownTimeout = null;\n        }\n\n        public override async init(): Promise<boolean> {\n            const text = String(this.appDefinition.text).trim();\n            if (text.length > 0) {\n                if (this.appDefinition.objId && text.includes('%s')) {\n                    try {\n                        const objId = this.appDefinition.objId;\n                        const obj = await this.adapter.getForeignObjectAsync(objId);\n                        if (obj && obj.type === 'state') {\n                            const state = await this.adapter.getForeignStateAsync(objId);\n\n                            this.isStaticText = false;\n                            this.objCache = {\n                                val: state && state.ack ? state.val : undefined,\n                                type: obj?.common.type,\n                                unit: obj?.common?.unit,\n                                ts: state ? state.ts : Date.now(),\n                            };\n\n                            const supportedTypes = ['string', 'number', 'mixed'];\n                            if (obj?.common.type && !supportedTypes.includes(obj.common.type)) {\n                                this.adapter.log.warn(\n                                    `[initCustomApp] Object of app \"${this.appDefinition.name}\" with objId \"${objId}\" has invalid type: ${obj.common.type} instead of ${supportedTypes.join(', ')}`,\n                                );\n                            }\n\n                            if (text.includes('%u') && !obj?.common?.unit) {\n                                this.adapter.log.warn(\n                                    `[initCustomApp] Object of app \"${this.appDefinition.name}\" (${objId}) has no unit - remove \"%u\" from text or define unit in object (common.unit)`,\n                                );\n                            }\n\n                            if (state && !state.ack) {\n                                this.adapter.log.info(`[initCustomApp] State value of app \"${this.appDefinition.name}\" (${objId}) is not acknowledged (ack: false) - waiting for new value`);\n                            }\n\n                            await this.adapter.subscribeForeignStatesAsync(objId);\n                            await this.adapter.subscribeForeignObjectsAsync(objId);\n\n                            this.adapter.log.debug(`[initCustomApp] Init app \"${this.appDefinition.name}\" (${obj.common.type}) with objId \"${objId}\" - subscribed to changes`);\n                        } else {\n                            this.adapter.log.warn(`[initCustomApp] App \"${this.appDefinition.name}\" was configured with invalid objId \"${objId}\": Invalid type ${obj?.type}`);\n                        }\n                    } catch (error) {\n                        this.adapter.log.error(`[initCustomApp] Unable to get object information for app \"${this.appDefinition.name}\": ${error}`);\n                    }\n                } else {\n                    this.adapter.log.debug(`[initCustomApp] Init app \"${this.appDefinition.name}\" with static text`);\n                    this.isStaticText = true;\n                }\n            } else if (this.appDefinition.useBackgroundEffect && this.appDefinition.backgroundEffect) {\n                this.adapter.log.debug(`[initCustomApp] Init app \"${this.appDefinition.name}\" with background only`);\n                this.isBackgroundOny = true;\n            }\n\n            return super.init();\n        }\n\n        private createAppRequestObj(text: string, val?: ioBroker.StateValue): AwtrixApi.App {\n            const app: AwtrixApi.App = {\n                pos: this.appDefinition.position,\n            };\n\n            if (text !== '') {\n                app.text = text;\n                app.textCase = 2; // show as sent\n            }\n\n            // Background\n            if (this.appDefinition.useBackgroundEffect) {\n                app.effect = this.appDefinition.backgroundEffect;\n            } else if (this.appDefinition.backgroundColor) {\n                app.background = this.appDefinition.backgroundColor;\n            }\n\n            // Set rainbow colors OR text color\n            if (this.appDefinition.rainbow) {\n                app.rainbow = true;\n            } else if (this.appDefinition.textColor) {\n                app.color = this.appDefinition.textColor;\n            }\n\n            // Set noScroll OR scroll speed\n            if (this.appDefinition.noScroll) {\n                app.noScroll = true;\n            } else {\n                // Scroll speed\n                if (this.appDefinition.scrollSpeed > 0) {\n                    app.scrollSpeed = this.appDefinition.scrollSpeed;\n                }\n\n                // Repeat\n                if (this.appDefinition.repeat > 0) {\n                    app.repeat = this.appDefinition.repeat;\n                }\n            }\n\n            // Icon\n            if (this.appDefinition.icon) {\n                app.icon = this.appDefinition.icon;\n            }\n\n            // Duration\n            if (this.appDefinition.duration > 0) {\n                app.duration = this.appDefinition.duration;\n            }\n\n            // Thresholds\n            if (typeof val === 'number') {\n                if (this.appDefinition.thresholdLtActive && val < this.appDefinition.thresholdLtValue) {\n                    this.adapter.log.debug(\n                        `[createAppRequestObj] LT < custom app \"${this.appDefinition.name}\" has a value (${val}) less than ${this.appDefinition.thresholdLtValue} - overriding values`,\n                    );\n\n                    if (this.appDefinition.thresholdLtIcon) {\n                        app.icon = this.appDefinition.thresholdLtIcon;\n                    }\n                    if (this.appDefinition.thresholdLtTextColor) {\n                        app.color = this.appDefinition.thresholdLtTextColor;\n                        app.rainbow = false; // disable rainbow\n                    }\n                    if (this.appDefinition.thresholdLtBackgroundColor) {\n                        app.background = this.appDefinition.thresholdLtBackgroundColor;\n\n                        if (this.appDefinition.useBackgroundEffect) {\n                            delete app.effect;\n                        }\n                    }\n                } else if (this.appDefinition.thresholdGtActive && val > this.appDefinition.thresholdGtValue) {\n                    this.adapter.log.debug(\n                        `[createAppRequestObj] GT > custom app \"${this.appDefinition.name}\" has a value (${val}) greater than ${this.appDefinition.thresholdGtValue} - overriding values`,\n                    );\n\n                    if (this.appDefinition.thresholdGtIcon) {\n                        app.icon = this.appDefinition.thresholdGtIcon;\n                    }\n                    if (this.appDefinition.thresholdGtTextColor) {\n                        app.color = this.appDefinition.thresholdGtTextColor;\n                        app.rainbow = false; // disable rainbow\n                    }\n                    if (this.appDefinition.thresholdGtBackgroundColor) {\n                        app.background = this.appDefinition.thresholdGtBackgroundColor;\n\n                        if (this.appDefinition.useBackgroundEffect) {\n                            delete app.effect;\n                        }\n                    }\n                }\n            } else if (this.appDefinition.thresholdLtActive || this.appDefinition.thresholdGtActive) {\n                this.adapter.log.warn(`[createAppRequestObj] Found enabled thresholds for custom app \"${this.appDefinition.name}\" - data type is invalid (${typeof val})`);\n            }\n\n            return app;\n        }\n\n        public override async refresh(): Promise<boolean> {\n            let refreshed = false;\n\n            if (await super.refresh()) {\n                const text = String(this.appDefinition.text).trim();\n\n                if (this.objCache && !this.isStaticText) {\n                    this.adapter.log.debug(`[refreshCustomApp] Refreshing custom app \"${this.appDefinition.name}\" with icon \"${this.appDefinition.icon}\" and text \"${this.appDefinition.text}\"`);\n\n                    try {\n                        if (this.isVisible) {\n                            const val = this.objCache.val;\n\n                            if (typeof val !== 'undefined') {\n                                let newVal = val;\n\n                                if (this.objCache.type === 'number') {\n                                    const realVal = typeof val !== 'number' ? parseFloat(val as string) : val;\n                                    const decimals = typeof this.appDefinition.decimals === 'string' ? parseInt(this.appDefinition.decimals) : this.appDefinition.decimals ?? 3;\n\n                                    if (!isNaN(realVal) && realVal % 1 !== 0) {\n                                        const valParts = String(realVal).split('.');\n                                        const countDigits = valParts[0].length;\n                                        let countDecimals = valParts[1].length || 3;\n\n                                        this.adapter.log.debug(`[refreshCustomApp] value of objId \"${this.appDefinition.objId}\" has ${countDigits} digits and ${countDecimals} decimals`);\n\n                                        if (countDecimals > decimals) {\n                                            countDecimals = decimals; // limit\n                                        }\n\n                                        const numFormat = this.adapter.config.numberFormat;\n\n                                        // Dynamic round\n                                        if (this.appDefinition.dynamicRound) {\n                                            let maxLength = 7; // without icon\n                                            if (this.appDefinition.icon) {\n                                                maxLength = 5;\n                                            }\n\n                                            // digits\n                                            maxLength -= countDigits; // substract values in front of decimal point\n\n                                            // If thousands seperator\n                                            if (['.,', ',.'].includes(numFormat) && countDigits > 3) {\n                                                maxLength -= 1;\n                                            }\n\n                                            // unit\n                                            maxLength -= this.objCache.unit ? text.trim().replace('%s', '').replace('%u', this.objCache.unit).length : 1;\n\n                                            if (maxLength < countDecimals) {\n                                                countDecimals = maxLength >= 0 ? maxLength : 0;\n                                            }\n                                        }\n\n                                        if (numFormat === 'system') {\n                                            newVal = this.adapter.formatValue(realVal, countDecimals);\n                                        } else if (['.,', ',.'].includes(numFormat)) {\n                                            newVal = this.adapter.formatValue(realVal, countDecimals, numFormat);\n                                        } else if (numFormat === '.') {\n                                            newVal = realVal.toFixed(countDecimals);\n                                        } else if (numFormat === ',') {\n                                            newVal = realVal.toFixed(countDecimals).replace('.', ',');\n                                        }\n\n                                        this.adapter.log.debug(\n                                            `[refreshCustomApp] value (formatted) of objId \"${this.appDefinition.objId}\" from ${realVal} to ${newVal} (${countDecimals} decimals) with \"${numFormat}\"`,\n                                        );\n                                    }\n                                }\n\n                                const displayText = text\n                                    .replace('%s', newVal as string)\n                                    .replace('%u', this.objCache.unit ?? '')\n                                    .trim();\n\n                                if (displayText.length > 0) {\n                                    await this.apiClient!.appRequestAsync(this.appDefinition.name, this.createAppRequestObj(displayText, val)).catch((error) => {\n                                        this.adapter.log.warn(`(custom?name=${this.appDefinition.name}) Unable to update custom app \"${this.appDefinition.name}\": ${error}`);\n                                    });\n\n                                    refreshed = true;\n                                } else {\n                                    // Empty text => remove app\n                                    this.adapter.log.debug(`[refreshCustomApp] Going to remove app \"${this.appDefinition.name}\" (empty text)`);\n\n                                    await this.apiClient!.removeAppAsync(this.appDefinition.name).catch((error) => {\n                                        this.adapter.log.warn(`[refreshCustomApp] Unable to remove app \"${this.appDefinition.name}\" (empty text): ${error}`);\n                                    });\n                                }\n                            } else {\n                                // No state value => remove app\n                                this.adapter.log.debug(`[refreshCustomApp] Going to remove app \"${this.appDefinition.name}\" (no state data)`);\n\n                                await this.apiClient!.removeAppAsync(this.appDefinition.name).catch((error) => {\n                                    this.adapter.log.warn(`[refreshCustomApp] Unable to remove app \"${this.appDefinition.name}\" (no state data): ${error}`);\n                                });\n                            }\n                        }\n                    } catch (error) {\n                        this.adapter.log.error(`[refreshCustomApp] Unable to refresh app \"${this.appDefinition.name}\": ${error}`);\n                    }\n                } else if (this.isStaticText) {\n                    // App with static text (no %s specified)\n                    this.adapter.log.debug(`[refreshCustomApp] Creating app \"${this.appDefinition.name}\" with icon \"${this.appDefinition.icon}\" and static text \"${this.appDefinition.text}\"`);\n\n                    if (this.appDefinition.objId) {\n                        this.adapter.log.warn(\n                            `[refreshCustomApp] App \"${this.appDefinition.name}\" was defined with objId \"${this.appDefinition.objId}\" but \"%s\" is not used in the text - state changes will be ignored`,\n                        );\n                    }\n\n                    const displayText = text.replace('%u', '').trim();\n\n                    if (displayText.length > 0) {\n                        await this.apiClient.appRequestAsync(this.appDefinition.name, this.createAppRequestObj(displayText)).catch((error) => {\n                            this.adapter.log.warn(`(custom?name=${this.appDefinition.name}) Unable to create app \"${this.appDefinition.name}\" with static text: ${error}`);\n                        });\n\n                        refreshed = true;\n                    } else {\n                        // Empty text => remove app\n                        this.adapter.log.debug(`[refreshCustomApp] Going to remove app \"${this.appDefinition.name}\" with static text (empty text)`);\n\n                        await this.apiClient.removeAppAsync(this.appDefinition.name).catch((error) => {\n                            this.adapter.log.warn(`[refreshCustomApp] Unable to remove app \"${this.appDefinition.name}\" with static text (empty text): ${error}`);\n                        });\n                    }\n                } else if (this.isBackgroundOny) {\n                    await this.apiClient.appRequestAsync(this.appDefinition.name, this.createAppRequestObj('')).catch((error) => {\n                        this.adapter.log.warn(`(custom?name=${this.appDefinition.name}) Unable to create app \"${this.appDefinition.name}\" with background only: ${error}`);\n                    });\n\n                    refreshed = true;\n                }\n            }\n\n            return refreshed;\n        }\n\n        protected override async stateChanged(id: string, state: ioBroker.State | null | undefined): Promise<void> {\n            if (this.objCache && !this.isStaticText) {\n                if (id && state && id === this.appDefinition.objId) {\n                    if (state.ack) {\n                        // Just refresh if value has changed\n                        if (state.val !== this.objCache.val) {\n                            this.adapter.log.debug(`[onStateChange] \"${this.appDefinition.name}\" received state change of objId \"${id}\" from ${this.objCache.val} to ${state.val} (ts: ${state.ts})`);\n\n                            if (this.objCache.ts + this.adapter.config.ignoreNewValueForAppInTimeRange * 1000 < state.ts) {\n                                this.objCache.val = this.objCache.type === 'mixed' ? String(state.val) : state.val;\n                                this.objCache.ts = state.ts;\n\n                                this.clearCooldownTimeout();\n                                this.refresh();\n                            } else {\n                                this.adapter.log.debug(\n                                    `[onStateChange] \"${this.appDefinition.name}\" ignoring customApps state change of objId \"${id}\" to ${state.val} - refreshes too fast (within ${\n                                        this.adapter.config.ignoreNewValueForAppInTimeRange\n                                    } seconds) - Last update: ${this.adapter.formatDate(this.objCache.ts, 'YYYY-MM-DD hh:mm:ss.sss')}`,\n                                );\n\n                                // Set this value as the new value if no new value arrives\n                                this.clearCooldownTimeout();\n                                this.cooldownTimeout = this.adapter.setTimeout(\n                                    () => {\n                                        this.cooldownTimeout = null;\n\n                                        if (this.objCache) {\n                                            this.objCache.val = this.objCache.type === 'mixed' ? String(state.val) : state.val;\n                                            this.objCache.ts = state.ts;\n\n                                            this.refresh();\n                                        }\n                                    },\n                                    (this.adapter.config.ignoreNewValueForAppInTimeRange + 5) * 1000, // +5 seconds\n                                );\n                            }\n                        }\n                    } else {\n                        this.adapter.log.debug(`[onStateChange] \"${this.appDefinition.name}\" ignoring state change of \"${id}\" to ${state.val} - ack is false`);\n                    }\n                }\n            }\n        }\n\n        protected override async objectChanged(id: string, obj: ioBroker.Object | null | undefined): Promise<void> {\n            if (this.objCache && !this.isStaticText) {\n                if (id && id === this.appDefinition.objId) {\n                    if (!obj) {\n                        this.objCache = undefined;\n                    } else {\n                        this.objCache.type = obj?.common.type;\n                        this.objCache.unit = obj?.common?.unit;\n\n                        this.refresh();\n                    }\n                }\n            }\n        }\n\n        private clearCooldownTimeout(): void {\n            if (this.cooldownTimeout) {\n                this.adapter.clearTimeout(this.cooldownTimeout);\n                this.cooldownTimeout = null;\n            }\n        }\n\n        public override async unloadAsync(): Promise<void> {\n            if (this.cooldownTimeout) {\n                this.adapter.log.debug(`clearing custom app cooldown timeout for \"${this.getName()}\"`);\n                this.adapter.clearTimeout(this.cooldownTimeout);\n            }\n\n            await super.unloadAsync();\n        }\n    }\n}\n"],
  "mappings": "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",
  "names": ["AppType", "AbstractAppType"]
}
